<!--移除頁面功能-->
<script>
  //演算法
  /*
  1. 取得事件
  2. 取得ID、頁碼
  3. 執行delete function
  4. deleter function:
      - 取得ID跟頁碼(e.g. 3)
      - 將該頁面進行移除
      - 接著後面頁面的頁碼-1
      - 回傳頁碼的新內容(3)
  */
</script>
<!--添加頁面功能-->
<script>
  document.getElementById("add").addEventListener("click", function () {
    $(document).ready(function () {
      $.ajax({
        url: "insert/", // 要傳送的頁面
        method: "POST", // 使用 POST 方法傳送請求
        data: {
          id: "{{pages.first.book}}",
        }, // 將表單資料用打包起來送出去
        dataType: "html",
        //若成功-> localStroge
        success: function (response) {
          let loadpages = response;
          $("#loadpages").html(loadpages);
          let num = "{{pages.last.page_number}}";
          num = Number(num) + 1;
          showpage(num);
        },
      });
    });
  });
</script>
<!--顯示所選頁面資訊-->
<script>
  function showpage(num) {
    let old_page_num = $("#page").val();
    let old_page_text = $("#text-area").val();

    $(document).ready(function () {
      $.ajaxSetup({
        data: { csrfmiddlewaretoken: "{{ csrf_token }}" },
      });
      $.ajax({
        url: "showpage/", // 要傳送的頁面
        method: "POST", // 使用 POST 方法傳送請求
        data: {
          old_page_num: old_page_num,
          old_page_text: old_page_text,
          id: "{{pages.first.book}}",
          page: num,
        }, // 將表單資料用打包起來送出去
        dataType: "html",
        //若成功-> localStroge
        success: function (response) {
          $("#main").html(response);
        },
      });
    });
  }
</script>
